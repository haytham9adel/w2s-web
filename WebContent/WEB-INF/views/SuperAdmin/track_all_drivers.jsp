<jsp:include page="header.jsp" />
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ page import="resources.Assets"%>
<style>

#markerLayer img {
    border-radius: 50% !important;
    background-image: url('resources/dashboard/Images/marker-wimg.png') !important;
    padding: 10px !important;
    background-position: 3px 6px !important;
    background-repeat: no-repeat;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<!-- <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&key=AIzaSyC7CzVRaX4toLFXcXnNV_8TUtgRy2Y0efE"></script> -->
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyC7CzVRaX4toLFXcXnNV_8TUtgRy2Y0efE"></script>
<style>
    html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
    }
    .map_div {
        border: 1px solid #CCCCCC;
        border-radius: 4px;
        float: left;
        height: 500px;
        margin-left: 4px;
        margin-top: 10px;
        padding: 10px;
        width: 700px;
    }
</style>
<script>
var position;
var map;
var schoolMarker;
var markerLatest = [];
var positionM=[];
var latlngLatest= null;
 position=[
			<c:forEach var="type" items="${lat_lng}">
				<c:forEach var="key" items="${type.value}">
				[${key.lat},${key.lng}],
				</c:forEach>
			</c:forEach>
      
          ];   
 positionM=[<c:forEach var="type" items="${lat_lng}">
				<c:forEach var="key" items="${type.value}">
				["<div><table><tr><th>Route Name:</th><td>${key.route_name}</td></tr><tr><th>Driver Name:</th><td>${key.driver_name}</td></tr></table></div>", ${key.lat},${key.lng}],
				</c:forEach>
			</c:forEach>]; 
        
var numDeltas = 100;
var delay = 30; 
var deltaLat=[];
var deltaLng=[]; 
function initMap() {
    var map; 
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
        mapTypeId: 'roadmap'
    };
    map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    map.setTilt(50);
    var markers = positionM;
   
var car1="m4.548714,1c0.537629,0 1.075257,0 1.612621,0c0.038175,0.041886 0.089075,0.023064 0.134142,0.026245c0.606025,0.040826 1.207013,0.109753 1.800844,0.24575c0.32157,0.073433 0.525699,0.260596 0.667529,0.543726c0.211817,0.422574 0.265103,0.875635 0.290022,1.33983c0.033668,0.624052 0.02598,1.247839 0.026245,1.871891c0,0.130165 -0.001326,0.260066 0.000795,0.390231c0.00053,0.033933 -0.014581,0.084833 0.055141,0.074229c0.148192,-0.022269 0.280479,0.042947 0.4125,0.090135c0.122478,0.044007 0.218445,0.126189 0.211817,0.278623c-0.004242,0.098353 -0.041356,0.146602 -0.147662,0.116645c-0.112669,-0.031547 -0.226663,-0.058058 -0.340127,-0.086424c-0.192995,-0.048514 -0.192995,-0.048249 -0.192995,0.153495c0,6.086231 0,12.172462 0,18.258427c0,0.216589 0.003181,0.433443 -0.003977,0.650032c-0.015111,0.455447 -0.28313,0.771449 -0.725056,0.856547c-0.383339,0.073964 -0.770654,0.119561 -1.160885,0.136263c-1.174406,0.05037 -2.348811,0.030222 -3.523217,-0.008748c-0.424165,-0.01405 -0.847799,-0.046923 -1.267192,-0.121947c-0.426285,-0.07635 -0.679989,-0.325811 -0.744409,-0.753422c-0.038705,-0.25821 -0.019087,-0.519336 -0.019087,-0.778872c-0.000265,-6.064492 0,-12.128985 0,-18.193477c0,-0.043477 -0.003711,-0.087219 0.000795,-0.1299c0.009279,-0.088544 -0.022269,-0.116115 -0.110018,-0.09093c-0.12884,0.037114 -0.259801,0.068131 -0.389966,0.100474c-0.156941,0.03897 -0.207576,-0.009544 -0.182656,-0.169401c0.011665,-0.075554 0.056202,-0.124333 0.11479,-0.165159c0.132286,-0.092256 0.290288,-0.14236 0.439275,-0.140505c0.139974,0.001591 0.128045,-0.054346 0.12831,-0.144481c0.003181,-0.714982 -0.020943,-1.430495 0.022534,-2.145212c0.007423,-0.120092 0.048514,-0.237532 0.02704,-0.359479c0.003446,-0.001856 0.006893,-0.003711 0.010339,-0.005302c-0.002651,0.002651 -0.005567,0.005567 -0.008483,0.008218c-0.033138,-0.021208 -0.022799,-0.053551 -0.018822,-0.082182c0.044272,-0.318654 0.125129,-0.626968 0.260066,-0.920172c0.14289,-0.310435 0.364781,-0.509263 0.711536,-0.581636c0.475329,-0.099148 0.95331,-0.170461 1.436327,-0.214203c0.157471,-0.014316 0.318389,0.00106 0.471883,-0.049309zm-2.373996,4.024791c-0.007953,0.132551 0.014581,0.278358 0.040826,0.422574c0.093846,0.518011 0.199092,1.034166 0.285781,1.553238c0.019618,0.117706 0.055406,0.135202 0.161448,0.121947c0.682905,-0.085098 1.366075,-0.160917 2.054547,-0.191934c0.768268,-0.034463 1.532825,-0.000265 2.296851,0.071843c0.340127,0.032343 0.679193,0.076085 1.01826,0.116115c0.101269,0.01193 0.161448,0.008218 0.175498,-0.128575c0.035259,-0.343573 0.116645,-0.680519 0.187958,-1.01879c0.072373,-0.342513 0.146867,-0.685291 0.138649,-1.038673c-0.008483,-0.377772 -0.145807,-0.586407 -0.464725,-0.680519c-0.636512,-0.187693 -1.288135,-0.295059 -1.949036,-0.344369c-0.793453,-0.059118 -1.583724,-0.02545 -2.368959,0.103125c-0.387315,0.06336 -0.7741,0.130961 -1.148691,0.254234c-0.2317,0.07635 -0.365842,0.2317 -0.409054,0.472413c-0.016171,0.091195 -0.018557,0.1808 -0.019353,0.287371zm3.300265,19.649952c0.654274,0.009809 1.40531,-0.058058 2.157142,-0.107102c0.296385,-0.019353 0.389171,-0.112669 0.378037,-0.407463c-0.002916,-0.077675 -0.034198,-0.110813 -0.106571,-0.11532c-0.047453,-0.002916 -0.095172,-0.011134 -0.14236,-0.008218c-0.513769,0.032077 -1.027539,0.061769 -1.542633,0.075554c-0.983797,0.02598 -1.965738,0.00053 -2.947413,-0.060709c-0.150844,-0.009544 -0.302482,-0.025715 -0.454386,-0.007423c-0.038705,0.004772 -0.079266,0.006097 -0.104185,0.042682c-0.046658,0.068397 -0.000795,0.328993 0.062299,0.38652c0.122212,0.111608 0.274647,0.088279 0.419393,0.099944c0.725586,0.058058 1.451703,0.105776 2.28068,0.101534zm2.646522,-3.035427c0,0 0.000265,0 0.00053,0c0,0.511118 0,1.021971 0,1.533355c0,0.095702 0.003711,0.190874 0.058323,0.275177c0.085628,0.131756 0.248401,0.19273 0.397654,0.148192c0.15588,-0.046128 0.249992,-0.1808 0.250522,-0.382808c0.002121,-1.048217 0.000265,-2.096433 0.002121,-3.144385c0.000265,-0.099414 -0.032873,-0.108162 -0.125129,-0.092256c-0.152699,0.02651 -0.311761,0.031547 -0.46393,-0.002121c-0.107632,-0.023859 -0.122743,0.010339 -0.121947,0.105511c0.003711,0.519867 0.001856,1.039733 0.001856,1.559335zm-6.282937,0.039765c0,0.519336 -0.000265,1.038938 0.000265,1.558274c0,0.068662 -0.003711,0.138119 0.024655,0.204394c0.065746,0.15429 0.225072,0.242039 0.389966,0.211817c0.16675,-0.030487 0.286841,-0.182391 0.287371,-0.381218c0.001856,-1.06916 0,-2.138319 0.002651,-3.207744c0.000265,-0.093846 -0.035259,-0.108162 -0.116645,-0.093051c-0.161713,0.030222 -0.325281,0.030487 -0.486994,0c-0.073964,-0.013785 -0.104451,-0.007953 -0.103655,0.083772c0.005037,0.54134 0.002386,1.08268 0.002386,1.623755zm5.58174,-20.105399c-0.017232,0 -0.034728,0 -0.05196,0c-0.163568,-0.001856 -0.168075,0.001591 -0.105511,0.152169c0.127249,0.305398 0.301422,0.582961 0.519336,0.831893c0.088809,0.101269 0.187693,0.192465 0.308315,0.255029c0.255559,0.133347 0.565199,0.059118 0.667794,-0.158531c0.082977,-0.176293 -0.007953,-0.32263 -0.098088,-0.455712c-0.295325,-0.436359 -0.745469,-0.576864 -1.239886,-0.624847zm-5.077515,1.30139c0.121152,0.003711 0.235411,-0.023329 0.331909,-0.094642c0.389171,-0.288167 0.622992,-0.688472 0.800345,-1.128013c0.020678,-0.05143 0.009279,-0.080061 -0.055141,-0.079531c-0.551679,0.006097 -1.037612,0.162773 -1.371642,0.630945c-0.094907,0.132817 -0.176293,0.290818 -0.084303,0.470027c0.080326,0.156941 0.221096,0.194055 0.378832,0.201213zm0.197767,12.789886c0,-0.250787 -0.001856,-0.502105 0.00106,-0.752892c0.000795,-0.069987 -0.016701,-0.100474 -0.093846,-0.098353c-0.172847,0.005037 -0.346224,0.004772 -0.519071,0c-0.069722,-0.001856 -0.088279,0.023329 -0.088014,0.08934c0.001856,0.50184 0.002386,1.003944 -0.00053,1.505784c-0.00053,0.078205 0.031017,0.093051 0.099414,0.09146c0.168605,-0.003446 0.337476,-0.004507 0.506081,0.00053c0.075024,0.002121 0.096763,-0.023859 0.095702,-0.096232c-0.002916,-0.246281 -0.00106,-0.493091 -0.000795,-0.739637zm-0.00053,1.730856c0,-0.246546 -0.001856,-0.493091 0.00106,-0.739902c0.00053,-0.069192 -0.014846,-0.101269 -0.093051,-0.099148c-0.172847,0.005567 -0.346224,0.004507 -0.519071,0.000265c-0.068927,-0.001591 -0.088279,0.023329 -0.088014,0.089605c0.001856,0.493356 0.002916,0.986713 -0.00053,1.479804c-0.00053,0.081917 0.03791,0.099944 0.101799,0.087219c0.158531,-0.031547 0.316533,-0.020413 0.474534,0.001591c0.093846,0.01299 0.129105,-0.017762 0.125924,-0.118766c-0.007688,-0.23329 -0.002651,-0.467111 -0.002651,-0.700667zm-0.69722,0.86291c0,0.536833 0.000795,1.072871 -0.00106,1.608644c0,0.053816 0.013785,0.067601 0.066276,0.059118c0.17974,-0.028896 0.359745,-0.030222 0.539749,0.002386c0.064155,0.011399 0.093581,-0.009809 0.093316,-0.081917c-0.002121,-0.506877 -0.001326,-1.013488 -0.001326,-1.520365c0,-0.048779 -0.003446,-0.075289 -0.072903,-0.066276c-0.20519,0.026775 -0.411705,0.021473 -0.624052,-0.001591zm0,-6.841774c0,0.536833 0.000795,1.072871 -0.001326,1.609174c0,0.053551 0.011134,0.069192 0.064155,0.059913c0.188488,-0.032873 0.378302,-0.027571 0.56679,-0.002651c0.058058,0.007688 0.067336,-0.011399 0.067071,-0.059383c-0.00053,-0.511648 -0.00053,-1.023032 0,-1.53468c0,-0.062034 -0.017497,-0.072108 -0.085628,-0.066276c-0.201478,0.017497 -0.404282,0.020413 -0.611062,-0.006097zm6.479378,-2.608347c0,0.151639 0,0.303013 0,0.454386c0,0.008748 -0.00053,0.017497 0,0.02598c0.009013,0.098883 0.013255,0.198827 0.029692,0.296385c0.007158,0.042947 0.005037,0.107102 0.090135,0.094377c0.209696,-0.031017 0.26961,-0.086954 0.320244,-0.294264c0.057262,-0.233556 0.05037,-0.472413 0.06495,-0.708885c0.027836,-0.448554 0.044272,-0.897903 0.066276,-1.346987c0.003181,-0.062564 -0.010339,-0.092786 -0.080061,-0.061769c-0.125659,0.055672 -0.250787,0.112934 -0.379892,0.159857c-0.055141,0.019883 -0.057527,0.053021 -0.060709,0.097823c-0.031017,0.427346 -0.054876,0.854692 -0.050635,1.283098zm-5.782158,5.135307c0,-0.242304 0,-0.484343 0,-0.726382c0,-0.047719 0.008748,-0.10286 -0.068927,-0.088544c-0.183981,0.033668 -0.367167,0.028631 -0.551414,-0.000795c-0.040031,-0.006362 -0.080061,-0.014581 -0.079531,0.059648c0.004242,0.492826 0.003711,0.985917 0.000795,1.478744c-0.00053,0.079796 0.034463,0.091991 0.101534,0.090665c0.164364,-0.003181 0.328728,-0.005832 0.492826,0.00106c0.091195,0.003977 0.107102,-0.034198 0.105776,-0.113729c-0.003711,-0.233821 -0.00106,-0.467111 -0.00106,-0.700667zm5.589693,1.716276c0,0.246546 0.001591,0.493091 -0.00106,0.739637c-0.000795,0.068397 0.01352,0.109222 0.092256,0.097823c0.171256,-0.024655 0.342513,-0.01405 0.513504,0.000795c0.069987,0.006097 0.088544,-0.023064 0.088279,-0.088544c-0.001591,-0.50184 -0.001856,-1.003414 0,-1.505254c0.000265,-0.066276 -0.020413,-0.090665 -0.089075,-0.088809c-0.164099,0.004242 -0.328993,0.007158 -0.492826,-0.000795c-0.095702,-0.004772 -0.11479,0.032343 -0.112934,0.118501c0.005037,0.242304 0.001856,0.484343 0.001856,0.726647zm-5.745839,-6.769931c0,-0.226398 0.002916,-0.378037 -0.000795,-0.529675c-0.003711,-0.155615 -0.015641,-0.311496 -0.021208,-0.467376c-0.016171,-0.442987 -0.016436,-0.441131 -0.427081,-0.604434c-0.090135,-0.035789 -0.123008,-0.02651 -0.117175,0.079001c0.023064,0.410644 0.032873,0.822349 0.06389,1.232198c0.015376,0.202804 0.003446,0.407198 0.040296,0.608676c0.020148,0.110548 0.032608,0.222421 0.081387,0.325546c0.058323,0.123273 0.185042,0.135998 0.288432,0.136793c0.089075,0.00053 0.062564,-0.113464 0.075024,-0.181065c0.040561,-0.223482 0.007953,-0.449614 0.017232,-0.599663zm6.437757,8.492304c0,-0.233556 -0.003977,-0.467376 0.002121,-0.700932c0.002386,-0.093581 -0.019618,-0.131226 -0.121417,-0.125129c-0.155085,0.009279 -0.311496,0.006893 -0.467111,0.00053c-0.081917,-0.003446 -0.108692,0.016436 -0.107632,0.10392c0.004772,0.48885 0.004507,0.977964 0,1.466814c-0.000795,0.079796 0.026245,0.097028 0.094112,0.086954c0.162508,-0.024389 0.325016,-0.027306 0.487524,-0.000265c0.093846,0.015641 0.116115,-0.031017 0.114259,-0.117706c-0.005037,-0.238062 -0.001856,-0.476125 -0.001856,-0.714187zm-0.691653,-5.145646c0,0.259536 0.000265,0.519336 -0.000265,0.779137c0,0.037645 -0.018822,0.079001 0.052225,0.068662c0.192465,-0.028101 0.385725,-0.030222 0.578189,0.001856c0.039235,0.006362 0.062829,0.002121 0.062564,-0.051165c-0.002386,-0.515095 -0.002121,-1.03019 -0.002386,-1.545284c0,-0.058323 -0.01299,-0.080591 -0.084303,-0.070517c-0.17974,0.02545 -0.362396,0.02545 -0.542135,0.00053c-0.069987,-0.009809 -0.066276,0.009279 -0.06548,0.063625c0.003711,0.251052 0.001591,0.502105 0.001591,0.753157zm0.000265,6.852908c0,0.255559 0.003181,0.511118 -0.001856,0.766412c-0.001326,0.067336 0.014846,0.081652 0.07847,0.069987c0.170991,-0.031017 0.343308,-0.028631 0.514034,-0.000795c0.076615,0.01246 0.101269,-0.010604 0.100474,-0.085363c-0.002651,-0.203599 -0.000795,-0.407198 -0.000795,-0.610532c0,-0.290288 -0.000265,-0.58031 0.000265,-0.870598c0,-0.066276 0.004772,-0.104185 -0.096497,-0.092256c-0.174703,0.020678 -0.354973,0.025185 -0.529941,-0.005037c-0.071313,-0.01246 -0.066276,0.008218 -0.065746,0.061769c0.003181,0.255294 0.001326,0.510853 0.001591,0.766412zm0.691123,-5.160757c0,-0.242304 -0.00106,-0.484608 0.00106,-0.726912c0.00053,-0.0509 0,-0.083772 -0.066541,-0.072373c-0.183716,0.031812 -0.367433,0.030487 -0.551679,-0.001326c-0.044802,-0.007688 -0.07741,-0.007423 -0.07688,0.062829c0.004507,0.48885 0.004507,0.977699 0.001326,1.466549c-0.00053,0.084038 0.033403,0.101269 0.107897,0.099148c0.155615,-0.004242 0.311761,-0.005567 0.467111,0.00053c0.088544,0.003711 0.121417,-0.021473 0.119296,-0.11479c-0.005832,-0.237797 -0.001856,-0.47586 -0.001591,-0.713657zm0.009013,-2.950595c0,0 -0.000265,0 -0.00053,0c0,-0.099414 0.004242,-0.199357 -0.000795,-0.298506c-0.01193,-0.233025 -0.152964,-0.375386 -0.362396,-0.371674c-0.199622,0.003446 -0.337476,0.149783 -0.344103,0.377506c-0.005832,0.203334 0.001326,0.406933 -0.003446,0.610267c-0.001326,0.066011 0.022799,0.090135 0.081387,0.078736c0.175498,-0.034198 0.350466,-0.025715 0.525169,0.00106c0.091991,0.014316 0.109753,-0.032873 0.105776,-0.111608c-0.004772,-0.095172 -0.00106,-0.190344 -0.00106,-0.285781zm-6.288504,-0.002916c-0.00106,0 -0.001856,0 -0.002916,0c0,-0.112669 0.008483,-0.226133 -0.001856,-0.337476c-0.018557,-0.204129 -0.168605,-0.33456 -0.363721,-0.328993c-0.192995,0.005567 -0.329523,0.147662 -0.333764,0.356298c-0.004507,0.216589 0.002121,0.433178 -0.005567,0.649767c-0.002121,0.064685 0.028366,0.066276 0.066806,0.058853c0.183981,-0.034994 0.367433,-0.028101 0.551414,0.000795c0.065746,0.010339 0.093581,-0.018027 0.090665,-0.087484c-0.004507,-0.103655 -0.00106,-0.207841 -0.00106,-0.311761zm6.412042,-4.683042c0.01299,-0.098088 0.003446,-0.248666 -0.003977,-0.400305c-0.005832,-0.121417 -0.060178,-0.154555 -0.169401,-0.156941c-0.105511,-0.001856 -0.130696,0.067071 -0.150313,0.145276c-0.111078,0.440601 -0.145011,0.893927 -0.221891,1.34036c-0.011134,0.06389 0.01246,0.07794 0.072108,0.051165c0.117175,-0.052755 0.235942,-0.102595 0.354973,-0.150578c0.059383,-0.023859 0.082977,-0.060443 0.084833,-0.126984c0.006097,-0.216324 0.019883,-0.432383 0.033668,-0.701992zm-7.184552,0.062564c0,0.061769 -0.003181,0.156941 0.000795,0.251848c0.006628,0.151109 -0.020413,0.319184 0.038175,0.447759c0.061239,0.135468 0.260596,0.123008 0.386785,0.200948c0.003711,0.002121 0.007688,0.004242 0.011665,0.005302c0.027836,0.007423 0.054081,0.040296 0.083507,0.018557c0.028896,-0.021208 0.011399,-0.054876 0.007158,-0.084303c-0.039235,-0.272791 -0.073433,-0.546377 -0.117706,-0.818107c-0.029161,-0.178149 -0.052225,-0.358154 -0.106836,-0.531266c-0.031282,-0.098618 -0.098883,-0.113199 -0.192995,-0.10286c-0.092786,0.010074 -0.109753,0.062034 -0.11532,0.138914c-0.010339,0.146602 -0.020943,0.293204 0.004772,0.473209zm3.622365,-4.83468c0.017497,-0.002651 0.073168,-0.009544 0.12778,-0.020678c0.028896,-0.005832 0.064155,-0.014846 0.066011,-0.051165c0.001591,-0.038175 -0.036584,-0.046393 -0.063094,-0.054611c-0.118766,-0.035259 -0.238327,-0.035259 -0.356563,0.003181c-0.023329,0.007688 -0.053551,0.016701 -0.054876,0.047984c-0.001326,0.031282 0.027836,0.040296 0.051165,0.049574c0.061239,0.023859 0.126189,0.026775 0.229579,0.025715z";
var icon1 = {
    geodesic: true,
    path: car1,
    scale: 1.2,
    strokeColor: 'white',
    strokeWeight: .10,
    fillOpacity: 1,
    fillColor: 'blue',
    offset: '5%',
   // rotation: 90,
    anchor: new google.maps.Point(10, 25) 
  };

var infowindow = new google.maps.InfoWindow({
	 content: ""
});
var school_icon = new google.maps.LatLng("${school_details.school_lat}", "${school_details.school_lng}");
bounds.extend(school_icon);
map.fitBounds(bounds);
schoolMarker= new google.maps.Marker({
position: school_icon,
map: map,
title: "${school_details.school_address}",
icon:"resources/dashboard/Images/school_icon.png"
});

	
    for( i = 0; i < markers.length; i++ ) {
        var position1 = new google.maps.LatLng(markers[i][1], markers[i][2]);
        bounds.extend(position1);
        map.fitBounds(bounds);
        markerLatest[i] = new google.maps.Marker({
        position: position1,
        map: map,
        title: "Your current location!",
        icon: icon1
    });
 	bindInfoWindow(markerLatest[i], map, infowindow, markers[i][0]);
}
}
google.maps.event.addDomListener(window, 'load', initMap);
function bindInfoWindow(marker, map, infowindow, description) {
    marker.addListener('mouseover', function() {
        infowindow.setContent(description);
        infowindow.open(map, this);
    });
}
function transition(result){
      for( j = 0; j < position.length; j++ ) {  
    	
      i = 0;
      deltaLat[j] = (result[j][0] - position[j][0])/numDeltas;
      deltaLng[j] = (result[j][1] - position[j][1])/numDeltas;
     }
      moveMarker();
}
i=0;

function moveMarker(){
        for( j = 0; j < position.length; j++ ) {
            position[j][0] += deltaLat[j];
            position[j][1] += deltaLng[j];
            var prevPos= markerLatest[j].getPosition();
            var latlng = new google.maps.LatLng(position[j][0], position[j][1]);
            if(prevPos.lat()!=position[0][0])
			{	
            	updateMarker(markerLatest[j], position[j][0], position[j][1], "");
			}
         }
         if(i!=numDeltas){
            i++;
            setTimeout(moveMarker, delay);
            }
  }
function updateMarker(marker, latitude, longitude, label) {
  var prevPosn = marker.getPosition();
  var bounds = new google.maps.LatLngBounds();
  var latlng = new google.maps.LatLng(latitude, longitude);
  marker.setPosition(latlng );
  var car1="m4.548714,1c0.537629,0 1.075257,0 1.612621,0c0.038175,0.041886 0.089075,0.023064 0.134142,0.026245c0.606025,0.040826 1.207013,0.109753 1.800844,0.24575c0.32157,0.073433 0.525699,0.260596 0.667529,0.543726c0.211817,0.422574 0.265103,0.875635 0.290022,1.33983c0.033668,0.624052 0.02598,1.247839 0.026245,1.871891c0,0.130165 -0.001326,0.260066 0.000795,0.390231c0.00053,0.033933 -0.014581,0.084833 0.055141,0.074229c0.148192,-0.022269 0.280479,0.042947 0.4125,0.090135c0.122478,0.044007 0.218445,0.126189 0.211817,0.278623c-0.004242,0.098353 -0.041356,0.146602 -0.147662,0.116645c-0.112669,-0.031547 -0.226663,-0.058058 -0.340127,-0.086424c-0.192995,-0.048514 -0.192995,-0.048249 -0.192995,0.153495c0,6.086231 0,12.172462 0,18.258427c0,0.216589 0.003181,0.433443 -0.003977,0.650032c-0.015111,0.455447 -0.28313,0.771449 -0.725056,0.856547c-0.383339,0.073964 -0.770654,0.119561 -1.160885,0.136263c-1.174406,0.05037 -2.348811,0.030222 -3.523217,-0.008748c-0.424165,-0.01405 -0.847799,-0.046923 -1.267192,-0.121947c-0.426285,-0.07635 -0.679989,-0.325811 -0.744409,-0.753422c-0.038705,-0.25821 -0.019087,-0.519336 -0.019087,-0.778872c-0.000265,-6.064492 0,-12.128985 0,-18.193477c0,-0.043477 -0.003711,-0.087219 0.000795,-0.1299c0.009279,-0.088544 -0.022269,-0.116115 -0.110018,-0.09093c-0.12884,0.037114 -0.259801,0.068131 -0.389966,0.100474c-0.156941,0.03897 -0.207576,-0.009544 -0.182656,-0.169401c0.011665,-0.075554 0.056202,-0.124333 0.11479,-0.165159c0.132286,-0.092256 0.290288,-0.14236 0.439275,-0.140505c0.139974,0.001591 0.128045,-0.054346 0.12831,-0.144481c0.003181,-0.714982 -0.020943,-1.430495 0.022534,-2.145212c0.007423,-0.120092 0.048514,-0.237532 0.02704,-0.359479c0.003446,-0.001856 0.006893,-0.003711 0.010339,-0.005302c-0.002651,0.002651 -0.005567,0.005567 -0.008483,0.008218c-0.033138,-0.021208 -0.022799,-0.053551 -0.018822,-0.082182c0.044272,-0.318654 0.125129,-0.626968 0.260066,-0.920172c0.14289,-0.310435 0.364781,-0.509263 0.711536,-0.581636c0.475329,-0.099148 0.95331,-0.170461 1.436327,-0.214203c0.157471,-0.014316 0.318389,0.00106 0.471883,-0.049309zm-2.373996,4.024791c-0.007953,0.132551 0.014581,0.278358 0.040826,0.422574c0.093846,0.518011 0.199092,1.034166 0.285781,1.553238c0.019618,0.117706 0.055406,0.135202 0.161448,0.121947c0.682905,-0.085098 1.366075,-0.160917 2.054547,-0.191934c0.768268,-0.034463 1.532825,-0.000265 2.296851,0.071843c0.340127,0.032343 0.679193,0.076085 1.01826,0.116115c0.101269,0.01193 0.161448,0.008218 0.175498,-0.128575c0.035259,-0.343573 0.116645,-0.680519 0.187958,-1.01879c0.072373,-0.342513 0.146867,-0.685291 0.138649,-1.038673c-0.008483,-0.377772 -0.145807,-0.586407 -0.464725,-0.680519c-0.636512,-0.187693 -1.288135,-0.295059 -1.949036,-0.344369c-0.793453,-0.059118 -1.583724,-0.02545 -2.368959,0.103125c-0.387315,0.06336 -0.7741,0.130961 -1.148691,0.254234c-0.2317,0.07635 -0.365842,0.2317 -0.409054,0.472413c-0.016171,0.091195 -0.018557,0.1808 -0.019353,0.287371zm3.300265,19.649952c0.654274,0.009809 1.40531,-0.058058 2.157142,-0.107102c0.296385,-0.019353 0.389171,-0.112669 0.378037,-0.407463c-0.002916,-0.077675 -0.034198,-0.110813 -0.106571,-0.11532c-0.047453,-0.002916 -0.095172,-0.011134 -0.14236,-0.008218c-0.513769,0.032077 -1.027539,0.061769 -1.542633,0.075554c-0.983797,0.02598 -1.965738,0.00053 -2.947413,-0.060709c-0.150844,-0.009544 -0.302482,-0.025715 -0.454386,-0.007423c-0.038705,0.004772 -0.079266,0.006097 -0.104185,0.042682c-0.046658,0.068397 -0.000795,0.328993 0.062299,0.38652c0.122212,0.111608 0.274647,0.088279 0.419393,0.099944c0.725586,0.058058 1.451703,0.105776 2.28068,0.101534zm2.646522,-3.035427c0,0 0.000265,0 0.00053,0c0,0.511118 0,1.021971 0,1.533355c0,0.095702 0.003711,0.190874 0.058323,0.275177c0.085628,0.131756 0.248401,0.19273 0.397654,0.148192c0.15588,-0.046128 0.249992,-0.1808 0.250522,-0.382808c0.002121,-1.048217 0.000265,-2.096433 0.002121,-3.144385c0.000265,-0.099414 -0.032873,-0.108162 -0.125129,-0.092256c-0.152699,0.02651 -0.311761,0.031547 -0.46393,-0.002121c-0.107632,-0.023859 -0.122743,0.010339 -0.121947,0.105511c0.003711,0.519867 0.001856,1.039733 0.001856,1.559335zm-6.282937,0.039765c0,0.519336 -0.000265,1.038938 0.000265,1.558274c0,0.068662 -0.003711,0.138119 0.024655,0.204394c0.065746,0.15429 0.225072,0.242039 0.389966,0.211817c0.16675,-0.030487 0.286841,-0.182391 0.287371,-0.381218c0.001856,-1.06916 0,-2.138319 0.002651,-3.207744c0.000265,-0.093846 -0.035259,-0.108162 -0.116645,-0.093051c-0.161713,0.030222 -0.325281,0.030487 -0.486994,0c-0.073964,-0.013785 -0.104451,-0.007953 -0.103655,0.083772c0.005037,0.54134 0.002386,1.08268 0.002386,1.623755zm5.58174,-20.105399c-0.017232,0 -0.034728,0 -0.05196,0c-0.163568,-0.001856 -0.168075,0.001591 -0.105511,0.152169c0.127249,0.305398 0.301422,0.582961 0.519336,0.831893c0.088809,0.101269 0.187693,0.192465 0.308315,0.255029c0.255559,0.133347 0.565199,0.059118 0.667794,-0.158531c0.082977,-0.176293 -0.007953,-0.32263 -0.098088,-0.455712c-0.295325,-0.436359 -0.745469,-0.576864 -1.239886,-0.624847zm-5.077515,1.30139c0.121152,0.003711 0.235411,-0.023329 0.331909,-0.094642c0.389171,-0.288167 0.622992,-0.688472 0.800345,-1.128013c0.020678,-0.05143 0.009279,-0.080061 -0.055141,-0.079531c-0.551679,0.006097 -1.037612,0.162773 -1.371642,0.630945c-0.094907,0.132817 -0.176293,0.290818 -0.084303,0.470027c0.080326,0.156941 0.221096,0.194055 0.378832,0.201213zm0.197767,12.789886c0,-0.250787 -0.001856,-0.502105 0.00106,-0.752892c0.000795,-0.069987 -0.016701,-0.100474 -0.093846,-0.098353c-0.172847,0.005037 -0.346224,0.004772 -0.519071,0c-0.069722,-0.001856 -0.088279,0.023329 -0.088014,0.08934c0.001856,0.50184 0.002386,1.003944 -0.00053,1.505784c-0.00053,0.078205 0.031017,0.093051 0.099414,0.09146c0.168605,-0.003446 0.337476,-0.004507 0.506081,0.00053c0.075024,0.002121 0.096763,-0.023859 0.095702,-0.096232c-0.002916,-0.246281 -0.00106,-0.493091 -0.000795,-0.739637zm-0.00053,1.730856c0,-0.246546 -0.001856,-0.493091 0.00106,-0.739902c0.00053,-0.069192 -0.014846,-0.101269 -0.093051,-0.099148c-0.172847,0.005567 -0.346224,0.004507 -0.519071,0.000265c-0.068927,-0.001591 -0.088279,0.023329 -0.088014,0.089605c0.001856,0.493356 0.002916,0.986713 -0.00053,1.479804c-0.00053,0.081917 0.03791,0.099944 0.101799,0.087219c0.158531,-0.031547 0.316533,-0.020413 0.474534,0.001591c0.093846,0.01299 0.129105,-0.017762 0.125924,-0.118766c-0.007688,-0.23329 -0.002651,-0.467111 -0.002651,-0.700667zm-0.69722,0.86291c0,0.536833 0.000795,1.072871 -0.00106,1.608644c0,0.053816 0.013785,0.067601 0.066276,0.059118c0.17974,-0.028896 0.359745,-0.030222 0.539749,0.002386c0.064155,0.011399 0.093581,-0.009809 0.093316,-0.081917c-0.002121,-0.506877 -0.001326,-1.013488 -0.001326,-1.520365c0,-0.048779 -0.003446,-0.075289 -0.072903,-0.066276c-0.20519,0.026775 -0.411705,0.021473 -0.624052,-0.001591zm0,-6.841774c0,0.536833 0.000795,1.072871 -0.001326,1.609174c0,0.053551 0.011134,0.069192 0.064155,0.059913c0.188488,-0.032873 0.378302,-0.027571 0.56679,-0.002651c0.058058,0.007688 0.067336,-0.011399 0.067071,-0.059383c-0.00053,-0.511648 -0.00053,-1.023032 0,-1.53468c0,-0.062034 -0.017497,-0.072108 -0.085628,-0.066276c-0.201478,0.017497 -0.404282,0.020413 -0.611062,-0.006097zm6.479378,-2.608347c0,0.151639 0,0.303013 0,0.454386c0,0.008748 -0.00053,0.017497 0,0.02598c0.009013,0.098883 0.013255,0.198827 0.029692,0.296385c0.007158,0.042947 0.005037,0.107102 0.090135,0.094377c0.209696,-0.031017 0.26961,-0.086954 0.320244,-0.294264c0.057262,-0.233556 0.05037,-0.472413 0.06495,-0.708885c0.027836,-0.448554 0.044272,-0.897903 0.066276,-1.346987c0.003181,-0.062564 -0.010339,-0.092786 -0.080061,-0.061769c-0.125659,0.055672 -0.250787,0.112934 -0.379892,0.159857c-0.055141,0.019883 -0.057527,0.053021 -0.060709,0.097823c-0.031017,0.427346 -0.054876,0.854692 -0.050635,1.283098zm-5.782158,5.135307c0,-0.242304 0,-0.484343 0,-0.726382c0,-0.047719 0.008748,-0.10286 -0.068927,-0.088544c-0.183981,0.033668 -0.367167,0.028631 -0.551414,-0.000795c-0.040031,-0.006362 -0.080061,-0.014581 -0.079531,0.059648c0.004242,0.492826 0.003711,0.985917 0.000795,1.478744c-0.00053,0.079796 0.034463,0.091991 0.101534,0.090665c0.164364,-0.003181 0.328728,-0.005832 0.492826,0.00106c0.091195,0.003977 0.107102,-0.034198 0.105776,-0.113729c-0.003711,-0.233821 -0.00106,-0.467111 -0.00106,-0.700667zm5.589693,1.716276c0,0.246546 0.001591,0.493091 -0.00106,0.739637c-0.000795,0.068397 0.01352,0.109222 0.092256,0.097823c0.171256,-0.024655 0.342513,-0.01405 0.513504,0.000795c0.069987,0.006097 0.088544,-0.023064 0.088279,-0.088544c-0.001591,-0.50184 -0.001856,-1.003414 0,-1.505254c0.000265,-0.066276 -0.020413,-0.090665 -0.089075,-0.088809c-0.164099,0.004242 -0.328993,0.007158 -0.492826,-0.000795c-0.095702,-0.004772 -0.11479,0.032343 -0.112934,0.118501c0.005037,0.242304 0.001856,0.484343 0.001856,0.726647zm-5.745839,-6.769931c0,-0.226398 0.002916,-0.378037 -0.000795,-0.529675c-0.003711,-0.155615 -0.015641,-0.311496 -0.021208,-0.467376c-0.016171,-0.442987 -0.016436,-0.441131 -0.427081,-0.604434c-0.090135,-0.035789 -0.123008,-0.02651 -0.117175,0.079001c0.023064,0.410644 0.032873,0.822349 0.06389,1.232198c0.015376,0.202804 0.003446,0.407198 0.040296,0.608676c0.020148,0.110548 0.032608,0.222421 0.081387,0.325546c0.058323,0.123273 0.185042,0.135998 0.288432,0.136793c0.089075,0.00053 0.062564,-0.113464 0.075024,-0.181065c0.040561,-0.223482 0.007953,-0.449614 0.017232,-0.599663zm6.437757,8.492304c0,-0.233556 -0.003977,-0.467376 0.002121,-0.700932c0.002386,-0.093581 -0.019618,-0.131226 -0.121417,-0.125129c-0.155085,0.009279 -0.311496,0.006893 -0.467111,0.00053c-0.081917,-0.003446 -0.108692,0.016436 -0.107632,0.10392c0.004772,0.48885 0.004507,0.977964 0,1.466814c-0.000795,0.079796 0.026245,0.097028 0.094112,0.086954c0.162508,-0.024389 0.325016,-0.027306 0.487524,-0.000265c0.093846,0.015641 0.116115,-0.031017 0.114259,-0.117706c-0.005037,-0.238062 -0.001856,-0.476125 -0.001856,-0.714187zm-0.691653,-5.145646c0,0.259536 0.000265,0.519336 -0.000265,0.779137c0,0.037645 -0.018822,0.079001 0.052225,0.068662c0.192465,-0.028101 0.385725,-0.030222 0.578189,0.001856c0.039235,0.006362 0.062829,0.002121 0.062564,-0.051165c-0.002386,-0.515095 -0.002121,-1.03019 -0.002386,-1.545284c0,-0.058323 -0.01299,-0.080591 -0.084303,-0.070517c-0.17974,0.02545 -0.362396,0.02545 -0.542135,0.00053c-0.069987,-0.009809 -0.066276,0.009279 -0.06548,0.063625c0.003711,0.251052 0.001591,0.502105 0.001591,0.753157zm0.000265,6.852908c0,0.255559 0.003181,0.511118 -0.001856,0.766412c-0.001326,0.067336 0.014846,0.081652 0.07847,0.069987c0.170991,-0.031017 0.343308,-0.028631 0.514034,-0.000795c0.076615,0.01246 0.101269,-0.010604 0.100474,-0.085363c-0.002651,-0.203599 -0.000795,-0.407198 -0.000795,-0.610532c0,-0.290288 -0.000265,-0.58031 0.000265,-0.870598c0,-0.066276 0.004772,-0.104185 -0.096497,-0.092256c-0.174703,0.020678 -0.354973,0.025185 -0.529941,-0.005037c-0.071313,-0.01246 -0.066276,0.008218 -0.065746,0.061769c0.003181,0.255294 0.001326,0.510853 0.001591,0.766412zm0.691123,-5.160757c0,-0.242304 -0.00106,-0.484608 0.00106,-0.726912c0.00053,-0.0509 0,-0.083772 -0.066541,-0.072373c-0.183716,0.031812 -0.367433,0.030487 -0.551679,-0.001326c-0.044802,-0.007688 -0.07741,-0.007423 -0.07688,0.062829c0.004507,0.48885 0.004507,0.977699 0.001326,1.466549c-0.00053,0.084038 0.033403,0.101269 0.107897,0.099148c0.155615,-0.004242 0.311761,-0.005567 0.467111,0.00053c0.088544,0.003711 0.121417,-0.021473 0.119296,-0.11479c-0.005832,-0.237797 -0.001856,-0.47586 -0.001591,-0.713657zm0.009013,-2.950595c0,0 -0.000265,0 -0.00053,0c0,-0.099414 0.004242,-0.199357 -0.000795,-0.298506c-0.01193,-0.233025 -0.152964,-0.375386 -0.362396,-0.371674c-0.199622,0.003446 -0.337476,0.149783 -0.344103,0.377506c-0.005832,0.203334 0.001326,0.406933 -0.003446,0.610267c-0.001326,0.066011 0.022799,0.090135 0.081387,0.078736c0.175498,-0.034198 0.350466,-0.025715 0.525169,0.00106c0.091991,0.014316 0.109753,-0.032873 0.105776,-0.111608c-0.004772,-0.095172 -0.00106,-0.190344 -0.00106,-0.285781zm-6.288504,-0.002916c-0.00106,0 -0.001856,0 -0.002916,0c0,-0.112669 0.008483,-0.226133 -0.001856,-0.337476c-0.018557,-0.204129 -0.168605,-0.33456 -0.363721,-0.328993c-0.192995,0.005567 -0.329523,0.147662 -0.333764,0.356298c-0.004507,0.216589 0.002121,0.433178 -0.005567,0.649767c-0.002121,0.064685 0.028366,0.066276 0.066806,0.058853c0.183981,-0.034994 0.367433,-0.028101 0.551414,0.000795c0.065746,0.010339 0.093581,-0.018027 0.090665,-0.087484c-0.004507,-0.103655 -0.00106,-0.207841 -0.00106,-0.311761zm6.412042,-4.683042c0.01299,-0.098088 0.003446,-0.248666 -0.003977,-0.400305c-0.005832,-0.121417 -0.060178,-0.154555 -0.169401,-0.156941c-0.105511,-0.001856 -0.130696,0.067071 -0.150313,0.145276c-0.111078,0.440601 -0.145011,0.893927 -0.221891,1.34036c-0.011134,0.06389 0.01246,0.07794 0.072108,0.051165c0.117175,-0.052755 0.235942,-0.102595 0.354973,-0.150578c0.059383,-0.023859 0.082977,-0.060443 0.084833,-0.126984c0.006097,-0.216324 0.019883,-0.432383 0.033668,-0.701992zm-7.184552,0.062564c0,0.061769 -0.003181,0.156941 0.000795,0.251848c0.006628,0.151109 -0.020413,0.319184 0.038175,0.447759c0.061239,0.135468 0.260596,0.123008 0.386785,0.200948c0.003711,0.002121 0.007688,0.004242 0.011665,0.005302c0.027836,0.007423 0.054081,0.040296 0.083507,0.018557c0.028896,-0.021208 0.011399,-0.054876 0.007158,-0.084303c-0.039235,-0.272791 -0.073433,-0.546377 -0.117706,-0.818107c-0.029161,-0.178149 -0.052225,-0.358154 -0.106836,-0.531266c-0.031282,-0.098618 -0.098883,-0.113199 -0.192995,-0.10286c-0.092786,0.010074 -0.109753,0.062034 -0.11532,0.138914c-0.010339,0.146602 -0.020943,0.293204 0.004772,0.473209zm3.622365,-4.83468c0.017497,-0.002651 0.073168,-0.009544 0.12778,-0.020678c0.028896,-0.005832 0.064155,-0.014846 0.066011,-0.051165c0.001591,-0.038175 -0.036584,-0.046393 -0.063094,-0.054611c-0.118766,-0.035259 -0.238327,-0.035259 -0.356563,0.003181c-0.023329,0.007688 -0.053551,0.016701 -0.054876,0.047984c-0.001326,0.031282 0.027836,0.040296 0.051165,0.049574c0.061239,0.023859 0.126189,0.026775 0.229579,0.025715z";
  marker.setIcon({
    geodesic: true,
    path: car1,
    strokeColor: 'red',
    strokeWeight: .10,
    fillOpacity: 1,
    fillColor: 'blue',
    scale: 1.2,
    offset: '5%',
    anchor: new google.maps.Point(10, 25), 
    rotation: google.maps.geometry.spherical.computeHeading(prevPosn, marker.getPosition())
  })
  if (label) {
    marker.setTitle(label);
  }
}
function movePosition(latArr,lngArr)
{
	var latLngStr=[];
	var latLngStrArr=[];
	for(var q=0;q<latArr.length;q++)
	{
		latLngStrArr.push(latArr[q]);
		latLngStrArr.push(lngArr[q]);
		
		latLngStr.push(latLngStrArr);
		latLngStrArr=[];
	}
	transition(latLngStr);
}
</script>

<body onload="">
<button type="button" class="btn btn-primary btn-submit pull-right" id="full_map">Full Map</button>
<button type="button" class="btn btn-primary btn-submit pull-right"  style="display:none;" id="small_map">Small Map</button>

<div class="col-sm-9" id="full_map_div">

<div class ='map_div' style="width: 100%;">    

    <div id="map-canvas"></div>
 
</div>
</div>



</body>
<script>
function getNewLatLng()
{ 
	$.ajax({
	    url : 'getAllDriversLatLng.html',
	    type:'post',
	    data:{"s_school_id":"${school_id}"},
	    success : function(data) {
	    	var json=[];
	    	var json1=[];
	    	var latiLongi = $.parseJSON(data);
	    	for(var i=0;i<Object.keys(latiLongi.lat_lng).length;i++)
			{	
	    		console.log("Test="+latiLongi.lat_lng[i][0].lat);
	    		json.push(latiLongi.lat_lng[i][0].lat);
				json1.push(latiLongi.lat_lng[i][0].lng);
			} 
	    	movePosition(json,json1)
	    }
	});
}
</script>

<script type="text/javascript">
 $(document).ready(function(){
   
setInterval(
        function ()
        {
     //   	getNewLatLng();
        }, 3000); 
});
</script>
</div>
<script>
//to keep the session id
var sessionId = '';

// name of the client
var name = '';

// socket connection url and port
var socket_url = 'we4it.net';
var port = '80';

/* var socket_url = '127.0.0.1';
var port = '8080';  */

$(document).ready(function() {
 
	join();
});

var webSocket;
function join() {
			name="map_chat";
			openSocket();
			return false;
}

/**
 * Will open the socket connection
 */
function openSocket() {
	// Ensures only one connection is open at a time
	if (webSocket !== undefined && webSocket.readyState !== WebSocket.CLOSED) {
		return;
	}

	// Create a new instance of the websocket
	//webSocket = new WebSocket("ws://" + socket_url + ":" + port + "/Tracking_bus/chat?name=${User_id}");
	
	webSocket = new WebSocket("ws://" + socket_url + ":" + port
			+ "/Tracking_bus/chat?name=map_chat");

	/**
	 * Binds functions to the listeners for the websocket.
	 */
	webSocket.onopen = function(event) {
		$('#message_container').fadeIn();

		if (event.data === undefined)
			return;

	};

	webSocket.onmessage = function(event) {

		// parsing the json data
		parseMessage(event.data);
	};

	webSocket.onclose = function(event) {
		
	};
}

/**
 * Sending the chat message to server
 */
function send() {
	var message = $('#send-msg-details').val();
	sendMessage();
	$('#send-msg-details').val('');
	var reciever_id=$('#user_id').val();
	var chat_type="2";
	var sender_name="<%=session.getAttribute("f_name")%>";
	if (message.trim().length > 0) {
		sendMessageToServer('message', message,reciever_id,sender_name,chat_type);
	} else {
		alert('Please enter message to send!');
	}
	
}

/**
 * Closing the socket connection
 */
function closeSocket() {
	webSocket.close();

	$('#message_container').fadeOut(600, function() {
		$('#prompt_name_container').fadeIn();
		// clearing the name and session id
		sessionId = '';
		name = '';

		// clear the ul li messages
		$('#messages').html('');
		$('p.online_count').hide();
	});
}

/**
 * Parsing the json message. The type of message is identified by 'flag' node
 * value flag can be self, new, message, exit
 */
function parseMessage(message) {
	var jObj = $.parseJSON(message);
	if(jObj.chat_type=="3")
	{
		//getNewLatLng();
	}
}

</script>
<script type="text/javascript">
	$(document).ready(function(){
		$("#full_map").click(function(){
			$("#full_map").hide();
			$("#small_map").show();
			$("#small_map_div").hide();
			$("#full_map_div").removeClass("col-sm-9");
			$("#full_map_div").addClass("col-sm-12");
		});
		$("#small_map").click(function(){
			$("#small_map").hide();
			$("#full_map").show();
			$("#small_map_div").show();
			$("#full_map_div").removeClass("col-sm-12");
			$("#full_map_div").addClass("col-sm-9");
		});
	});
</script>
<script type="text/javascript">
$(document).ready(function(){
   
setInterval(
        function ()
        {  
            $.post('trackAllRouteCount.html',{"s_school_id":"${school_id}"},function(data) {
               var data = $.parseJSON(data);
               $("#tTCount").val(data.size_l);
            });
            var old_count=$("#oTCount").val();
            var new_count=$("#tTCount").val();
            if(parseInt(new_count) > parseInt(old_count))
            {
            	
               $("#oTCount").val(new_count);
               getNewLatLng();
            }
           
        }, 2000); 

});
</script>
<input type="hidden" value="${size_l}" id="oTCount"> 
<input type="hidden" value="" id="tTCount"> 
<jsp:include page="footer.jsp" />